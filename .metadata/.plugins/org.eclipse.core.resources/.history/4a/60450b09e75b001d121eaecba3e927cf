package Firm_Bypass;

import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.net.ConnectException;
import java.net.InetSocketAddress;
import java.net.Socket;
import java.net.SocketTimeoutException;
import java.text.SimpleDateFormat;

import Crypto.KSBankEncSocket;
import Util.*;

public class FirmBypass extends Thread{

	//input TestData
	String test_send = TestData.firmTest;

	static Socket socket = new Socket();
	
	public static void main(String[] args) {
		
		//		CUtil.setConfig(args[0]);
		String path = System.getProperty("user.dir") + "\\conf\\config.ini";
		CUtil.setConfig(path);
		
		String ksnet_ip = CUtil.get("KSNET_IP").trim();
		int ksnet_port = Integer.parseInt(CUtil.get("KSNET_PORT"));
		int sock_timeout = Integer.parseInt(CUtil.get("SND_TIMEOUT"));
		
		//connect socket
		try {
			socket = new Socket();
			socket.connect(new InetSocketAddress(ksnet_ip, ksnet_port),5*1000);
			socket.setSoTimeout(sock_timeout*1000);	/* read timeout */
		} catch (IOException e) {
			e.printStackTrace();
		}
		
		//testcall
		int testcnt = 1;
		
		switch(testcnt) {
		case 1:
			FirmGateHandler fg = new FirmGateHandler(socket);
			break;
			
		case 2:
			DebitBinHandler db = new DebitBinHandler(socket, testcnt);
			break;
			
		default:

			break;
		}
	}
}
