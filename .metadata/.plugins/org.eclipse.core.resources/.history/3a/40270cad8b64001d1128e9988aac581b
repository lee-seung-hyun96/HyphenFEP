package Firm_Bypass;

import java.io.DataInputStream;
import java.io.InputStream;
import java.text.SimpleDateFormat;
import java.util.concurrent.Executors;
import java.util.concurrent.ScheduledExecutorService;
import java.util.concurrent.TimeUnit;

import Util.*;

public class FirmBypass{

	//input TestData
	final static int firmEGate = 1; 
	final static int firmDebitGate = 2;
	final static int firmVirtureGate = 3;
	final static int nomal = 4;
	
	public static void main(String[] args) throws Exception {
		
		//		CUtil.setConfig(args[0]);
		String path = System.getProperty("user.dir") + "\\conf\\config.ini";
		CUtil.setConfig(path);
		
		long SLEEP_TIME = Long.parseLong(CUtil.get("SLEEP_TIME")); /* request sleep time */
		int THREAD_DELAY_TIME = 1000 / Integer.parseInt(CUtil.get("SEND_CNT_PER_SEC")); /* db select sleep time */

		LUtil.println("START[" + CUtil.get("SEND_CNT_PER_SEC") + "]");

		TimerDeleteLog DeleteLog = new TimerDeleteLog(Integer.parseInt(CUtil.get("LOG_SAVE_DAYS")), CUtil.get("LOG_PATH"));
		DeleteLog.start();
		
		ScheduledExecutorService hyphen_Threadpool = Executors.newScheduledThreadPool(5);
		
		Runnable runnable = () -> {
			String RequestDate = new SimpleDateFormat("yyyyMMddHHmmss").format(new java.util.Date());
			
			System.out.println(Thread.currentThread().getName() + RequestDate);
		};
		
		hyphen_Threadpool.schedule(() ->{

		}runnable, 1, TimeUnit.SECONDS);

		//connect socket

	}
}















//String send_info[] = DUtil.Select_SendData();

//try {
//if (send_info[0].equals("0000")) {
//	
//	
//	//testcall
//	int testcnt = 2;
//	
//	switch(testcnt) {
//	case firmEGate:
//		//egate
//		new FirmGateHandler(send_info).start();
//		
//		break;
//	case firmDebitGate:
//		//debit_gate
//		/* binary include msg_len */
//		InputStream rs_in = null;
//		if ((send_info[2].equals("PRW") || send_info[2].equals("PRD")) && send_info[7].equals("0600601")) {
//			CopyInputStream cis = new CopyInputStream(DUtil.bin_in);
//			rs_in = cis.getCopy();
//		}
//		new DebitBinHandler(send_info, rs_in).start();
//		
//		break;
//	case firmVirtureGate:
//	
//		break;
//	case nomal:
//		
//		break;
//	
//	default:
//		break;
//	}
//	Thread.sleep(THREAD_DELAY_TIME);
//} else /* db select not found */
//{
//	Thread.sleep(SLEEP_TIME);
//}
//}catch(Exception e){
//	LUtil.println("test");
//}
