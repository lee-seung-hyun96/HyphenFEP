package ksnet.fpeg;

import java.io.*;
import java.util.*;

public class CUtil
{
    static String config_file   = null;
    static long   lastModified  = 0;

    public static Properties props = new Properties();

    public static synchronized void setConfig(String fpath)
    {
        if (!new File(fpath).exists()) throw new IllegalArgumentException("환경파일경로오류=["+fpath+"]");
        config_file = fpath;
    }

    public static synchronized boolean isNew()
    {
        FileInputStream fis = null;
        try
        {
            File f = new File(config_file);
            long m_lastModified = f.lastModified();

            if (m_lastModified > lastModified + 2000L)
            {
                fis = new FileInputStream(f);
                props.load(fis);
                fis.close(); fis = null;

                lastModified = m_lastModified;

                return true;
            }
        }catch(Exception e)
        {
            e.printStackTrace();
        }finally
        {
            try {if(fis!=null){fis.close();}}catch(Exception e){}finally{fis= null;}
        }
        return false;
    }

    public static String get(String kStr)
    {
        isNew();
        return props.getProperty(kStr);
    }

    public static String[] gets(String kStr)
    {
        return SUtil.split(get(kStr) ,",");
    }
}
