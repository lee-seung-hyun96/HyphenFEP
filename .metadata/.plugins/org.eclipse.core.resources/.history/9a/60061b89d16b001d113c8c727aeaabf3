package im.hyphen.util;

import java.io.File;
import java.io.FileOutputStream;
import java.io.PrintStream;
import java.util.Calendar;

public class LUtil
{
	public static StringBuffer sb = null;
	public static void println(Object pstr)
	{
			StringBuffer sb = new StringBuffer();
			String curr_date = SUtil.getCurrDate();
			
			sb.append("[");
			sb.append(curr_date.substring(8,10)).append(":").append(curr_date.substring(10,12)).append(":").append(curr_date.substring(12,14));
			sb.append("]" );
			sb.append(pstr);

			out.println(sb.toString());
		out.close();
	}
	
	public static void println(String prefix, Object pstr)
	{
		if (!init())
		{
			System.out.println("LOG_DIR_PATH Setting Error");
			return;
		}

		String curr_date = SUtil.getCurrDate();

		day_check(prefix, curr_date.substring(0,8));

		File openFile = new File(LOG_FILE);
		PrintStream out = null;

		try{
			if(openFile.exists()){
				out = new PrintStream(new FileOutputStream(LOG_FILE, true), true);
			}else{
				out = new PrintStream(new FileOutputStream(LOG_FILE), true);
			}

			if (pstr instanceof Throwable)
			{
				Throwable tw = (Throwable)pstr;
				tw.printStackTrace(out);
				out.println();
			}else{
				StringBuffer sb = new StringBuffer();

				sb.append("[");
				sb.append(curr_date.substring(8,10)).append(":").append(curr_date.substring(10,12)).append(":").append(curr_date.substring(12,14));
				sb.append("]" );
				sb.append(pstr);

				out.println(sb.toString());
			}
		}catch(Exception e)
		{
			e.printStackTrace();
		}finally {
			try{if (out != null) out.close();}catch(Exception e){};
		}
	}
	
	
}
